<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="description" content="Industrial maintenance training platform with interactive worksheets and analytics">
  <meta name="theme-color" content="#4a9eff">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Matrix Training">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="msapplication-TileColor" content="#4a9eff">
  <meta name="msapplication-TileImage" content="assets/icons/matrix-icon-192.png">
  <title>PLC Fundamentals Trainer</title>
  <link rel="stylesheet" href="main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="icon" type="image/x-icon" href="assets/icons/matrix-icon.ico">
  <link rel="manifest" href="manifest.json">
  <!-- Load dependencies -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
     <!-- Load app-specific scripts after dependencies -->
   <script defer src="image-fallback.js"></script>
   <script defer src="scenario-popup.js"></script>
   <script defer src="shared-navigation.js"></script>
  
     <style>
     /* Full Height Setup */
     html, body {
       height: 100%;
       margin: 0;
       padding: 0;
       overflow-x: hidden;
     }

     body {
       min-height: 100vh;
     }

     .hidden {
       opacity: 0;
       pointer-events: none;
     }

    /* Install button removed from header; styles no longer needed */

    /* Start Here Button Styles */
         .start-here-btn {
       background: linear-gradient(135deg, #4CAF50, #45a049);
       color: white;
       border: none;
       padding: 12px 24px;
       border-radius: 8px;
       font-weight: bold;
       font-size: 16px;
       cursor: pointer;
       transition: all 0.3s ease;
       display: flex;
       align-items: center;
       gap: 8px;
       margin-top: 15px;
       box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
       text-transform: uppercase;
       letter-spacing: 0.5px;
       position: relative;
       z-index: 10;
       pointer-events: auto;
     }

     .start-here-btn:hover {
       background: linear-gradient(135deg, #45a049, #388E3C);
       transform: translateY(-2px);
       box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
     }

     .start-here-btn:active {
       transform: translateY(0px);
       box-shadow: 0 2px 8px rgba(76, 175, 80, 0.3);
     }

     .start-here-btn i {
       font-size: 14px;
     }

    /* Navigation styles removed here to use centralized styles from main.css */

    /* Hero Section */
    .hero-section {
      background: linear-gradient(135deg, #1a1a1a, #2d2d2d);
      border-radius: 12px;
      padding: 30px;
      margin-bottom: 20px;
      text-align: center;
      border: 2px solid var(--accent-color);
      box-shadow: 0 8px 25px var(--accent-shadow-light);
    }

    .hero-content {
      max-width: 1200px;
      margin: 0 auto;
    }

    .hero-intro {
      display: flex;
      align-items: center;
      gap: 30px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .hero-text {
      flex: 1;
      text-align: left;
    }

    .hero-image {
      flex-shrink: 0;
      width: 300px;
      height: 200px;
      border-radius: 8px;
      overflow: hidden;
      background: rgba(255,255,255,0.05);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .hero-cad-image {
      width: 100%;
      height: 100%;
      object-fit: contain;
      transition: transform 0.3s ease;
    }

    .hero-image:hover .hero-cad-image {
      transform: scale(1.05);
    }

    .hero-title {
      color: #FFFFFF;
      font-size: 42px;
      font-weight: bold;
      margin-bottom: 15px;
      text-transform: uppercase;
      letter-spacing: 2px;
      text-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
    }

    .hero-subtitle {
      color: #CCCCCC;
      font-size: 18px;
      margin-bottom: 25px;
      line-height: 1.5;
    }

    .hero-install-button {
      background: linear-gradient(135deg, #4CAF50, #45a049);
      border: none;
      padding: 15px 30px;
      color: white;
      font-weight: bold;
      font-size: 18px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
      display: inline-flex;
      align-items: center;
      gap: 10px;
    }

    .hero-install-button:hover {
      background: linear-gradient(135deg, #45a049, #388E3C);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
    }

                   /* Main Container - Responsive Height */
      .main-container {
        min-height: calc(100vh - 120px); /* Minimum height, not fixed */
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        padding: 20px;
        max-width: 1400px;
        margin: 0 auto;
        overflow-y: visible; /* Remove scrollbar */
      }

           /* Features Section */
      .features-section {
        display: flex;
        flex-direction: column;
        gap: 15px;
        flex: 1;
        justify-content: flex-start;
      }

     .feature-card {
       background: linear-gradient(135deg, #333333, #555555);
       border: 2px solid #666666;
       border-radius: 12px;
       padding: 25px;
       transition: all 0.3s ease;
       cursor: pointer;
       box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
       display: flex;
       align-items: center;
       gap: 20px;
       position: relative;
       overflow: hidden;
     }

     .feature-card::before {
       content: '';
       position: absolute;
       top: 0;
       left: 0;
       right: 0;
       bottom: 0;
       background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
       opacity: 0;
       transition: opacity 0.3s ease;
     }

     .feature-card:hover::before {
       opacity: 1;
     }

         .feature-card:hover {
       background: linear-gradient(135deg, #4a4a4a, #666666);
       color: #ffffff;
       transform: translateY(-3px);
       box-shadow: 0 8px 25px rgba(74, 158, 255, 0.4);
       border: 2px solid var(--accent-color);
     }

    .feature-card.main-feature {
      background: linear-gradient(135deg, #2d2d2d, #4a4a4a);
      border: 2px solid var(--accent-color);
      box-shadow: 0 6px 20px var(--accent-shadow-light);
      position: relative;
    }

         .feature-card.main-feature:hover {
       background: linear-gradient(135deg, #4a4a4a, #666666);
       color: #ffffff;
       transform: translateY(-3px);
       box-shadow: 0 8px 25px rgba(74, 158, 255, 0.4);
       border: 2px solid var(--accent-color);
     }

     .feature-card.main-feature .start-here-btn {
       position: relative;
       z-index: 20;
       pointer-events: auto;
     }

    .feature-icon {
      flex-shrink: 0;
      width: 70px;
      height: 70px;
      background: linear-gradient(135deg, var(--accent-color), #3a7bd5);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 15px rgba(74, 158, 255, 0.3);
    }

    .feature-icon i {
      font-size: 32px;
      color: white;
    }

    .feature-content {
      flex: 1;
    }

    .feature-content h3 {
      font-size: 22px;
      font-weight: bold;
      margin-bottom: 10px;
      color: inherit;
    }

    .feature-content p {
      font-size: 15px;
      line-height: 1.4;
      margin-bottom: 12px;
      opacity: 0.8;
    }

         .feature-badge {
       display: inline-block;
       padding: 6px 12px;
       background: var(--accent-color);
       color: white;
       border-radius: 20px;
       font-size: 12px;
       font-weight: bold;
       text-transform: uppercase;
     }

           .feature-image {
        flex-shrink: 0;
        width: 100px;
        height: 70px;
        border-radius: 8px;
        overflow: hidden;
        background: rgba(255,255,255,0.05);
        display: flex;
        align-items: center;
        justify-content: center;
      }

     .feature-image .cad-image {
       width: 100%;
       height: 100%;
       object-fit: contain;
       transition: transform 0.3s ease;
     }

     .feature-card:hover .feature-image .cad-image {
       transform: scale(1.05);
     }

           .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 15px;
      }

    /* Main Content Layout (Legacy - keeping for compatibility) */
    .main-content {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      padding: 20px;
      background: #2d2d2d;
      border-radius: 8px;
      margin-bottom: 20px;
      gap: 20px;
    }

    /* Side Content */
    .side-content {
      display: flex;
      flex-direction: column;
      gap: 20px;
      width: 300px;
      margin: 0 20px;
    }

    .side-header {
      text-align: center;
      font-weight: bold;
      font-size: 18px;
      text-transform: uppercase;
      letter-spacing: 1px;
      padding-bottom: 10px;
      border-bottom: 2px solid;
      margin-bottom: 15px;
    }

    .side-header.curriculum {
      color: var(--accent-color);
      border-bottom: 2px solid var(--accent-color);
      padding-bottom: 10px;
      margin-bottom: 20px;
    }

    .side-header.documentation {
      color: var(--accent-color);
      border-bottom-color: var(--accent-color);
    }

    .cad-image {
      width: 100%;
      height: 200px;
      object-fit: contain;
      background: rgba(255,255,255,0.05);
      border-radius: 4px;
      flex-shrink: 1;
    }

    .button-container {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .side-button {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      background: linear-gradient(135deg, #333333, #555555);
      border: 2px solid #666666;
      border-radius: 8px;
      color: #FFFFFF;
      text-decoration: none;
      transition: all 0.3s ease;
      text-align: center;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

         .side-button:hover {
       background: linear-gradient(135deg, #4a4a4a, #666666);
       color: #ffffff;
       transform: translateY(-3px);
       box-shadow: 0 8px 20px rgba(74, 158, 255, 0.4);
       border: 2px solid var(--accent-color);
     }

    .side-button i {
      font-size: 24px;
      margin-bottom: 10px;
    }

    .button-text {
      font-weight: bold;
      font-size: 16px;
      margin-bottom: 5px;
    }

    .side-button small {
      opacity: 0.7;
      font-size: 12px;
    }

    /* Center Content */
    .center-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 40px;
      background: linear-gradient(135deg, #1a1a1a, #2d2d2d);
      border-radius: 12px;
      border: 2px solid var(--accent-color);
      box-shadow: 0 8px 25px var(--accent-shadow-light);
      max-width: 600px;
    }

    .center-title {
      color: #FFFFFF;
      font-size: 32px;
      font-weight: bold;
      margin-bottom: 20px;
      text-transform: uppercase;
      letter-spacing: 2px;
      text-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
    }

    .center-subtitle {
      color: #CCCCCC;
      font-size: 18px;
      margin-bottom: 30px;
      line-height: 1.6;
    }

    .curriculum-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      width: 100%;
      margin-top: 20px;
    }

    .curriculum-card {
      background: linear-gradient(135deg, #333333, #555555);
      border: 2px solid #666666;
      border-radius: 8px;
      padding: 25px;
      text-align: center;
      transition: all 0.3s ease;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

         .curriculum-card:hover {
       background: linear-gradient(135deg, #4a4a4a, #666666);
       color: #ffffff;
       transform: translateY(-5px);
       box-shadow: 0 8px 25px rgba(74, 158, 255, 0.4);
       border: 2px solid var(--accent-color);
     }

    .curriculum-card i {
      font-size: 36px;
      margin-bottom: 15px;
      display: block;
    }

    .curriculum-card h3 {
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 10px;
    }

    .curriculum-card p {
      font-size: 14px;
      opacity: 0.8;
      line-height: 1.4;
    }

    .page-title {
      text-align: center;
      color: #FFFFFF;
      font-size: 32px;
      font-weight: bold;
      margin-bottom: 30px;
      text-transform: uppercase;
      letter-spacing: 2px;
      text-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
    }

         /* Responsive Design */
           @media (max-width: 1200px) {
        .main-content {
          flex-direction: column;
          align-items: center;
        }
        
        .side-content {
          width: 100%;
          max-width: 400px;
          margin: 10px 0;
        }
        
        .features-grid {
          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
          gap: 15px;
        }
        
        .feature-image {
          width: 90px;
          height: 60px;
        }
      }

           @media (max-width: 768px) {
        .main-container {
          min-height: calc(100vh - 100px);
          padding: 15px;
          justify-content: flex-start;
          overflow-y: visible;
        }
        
        .hero-section {
          padding: 20px;
          margin-bottom: 15px;
        }

        .hero-intro {
          flex-direction: column;
          gap: 20px;
          text-align: center;
        }

        .hero-text {
          text-align: center;
        }

        .hero-image {
          width: 250px;
          height: 150px;
        }
        
        .hero-title {
          font-size: 32px;
        }
        
        .hero-subtitle {
          font-size: 16px;
        }
        
        .hero-install-button {
          padding: 10px 20px;
          font-size: 14px;
        }
       
       .feature-card {
         padding: 18px;
         flex-direction: column;
         text-align: center;
         gap: 12px;
       }
       
       .feature-icon {
         width: 60px;
         height: 60px;
       }
       
       .feature-icon i {
         font-size: 28px;
       }
       
       .feature-content h3 {
         font-size: 20px;
       }
       
       .feature-content p {
         font-size: 14px;
       }
       
       .feature-image {
         width: 80px;
         height: 60px;
       }
       
       .side-content {
         max-width: 100%;
       }
       
       .cad-image {
         height: 150px;
       }
     }

           @media (max-width: 480px) {
        .main-container {
          min-height: calc(100vh - 80px);
          padding: 10px;
          justify-content: flex-start;
          overflow-y: visible;
        }
        
        .hero-section {
          padding: 12px;
          margin-bottom: 12px;
        }

        .hero-intro {
          flex-direction: column;
          gap: 15px;
          text-align: center;
        }

        .hero-text {
          text-align: center;
        }

        .hero-image {
          width: 200px;
          height: 120px;
        }
        
        .hero-title {
          font-size: 24px;
        }
        
        .hero-subtitle {
          font-size: 14px;
        }
        
        .hero-install-button {
          padding: 8px 16px;
          font-size: 12px;
        }
       
       .feature-card {
         padding: 15px;
       }
       
       .feature-content h3 {
         font-size: 18px;
       }
       
       .feature-content p {
         font-size: 12px;
       }
       
       .feature-icon {
         width: 50px;
         height: 50px;
       }
       
       .feature-icon i {
         font-size: 24px;
       }
       
       .feature-image {
         width: 60px;
         height: 40px;
       }
     }
  </style>
</head>
<body class="home-page">
  

  <!-- Offline Indicator -->
  <div class="offline-indicator">
    <i class="fas fa-wifi-slash"></i> You are currently offline. Some features may be limited.
  </div>


  


  <div id="splash-screen">
    <div class="splash-content">
      <img src="assets/matrix-logo.png" alt="Matrix Logo" class="splash-logo">
      <div class="loading-bar">
        <div class="loading-progress"></div>
      </div>
      <div class="loading-text">Initializing Matrix TSL PLC Fundamentals Trainer Training Platform...</div>
    </div>
  </div>



  <!-- Main Container -->
  <div class="main-container">
    <!-- HERO SECTION -->
    <div class="hero-section">
      <div class="hero-content">
        <div class="hero-intro">
          <div class="hero-text">
            <h1 class="hero-title">PLC Fundamentals Trainer</h1>
                         <p class="hero-subtitle">
               Hands-on training platform designed specifically for those new to industrial maintenance and automation. 
               Features a Siemens S7-1214 PLC and 7-inch Unified Basic HMI with real-world components and industrial wiring standards.
             </p>
            <button onclick="installPWA()" class="hero-install-button">
              <i class="fas fa-download"></i> Install Matrix IM6930 App
            </button>
          </div>
          <div class="hero-image">
            <img src="assets/cad.png" alt="PLC Fundamentals Training System" class="hero-cad-image">
          </div>
        </div>
      </div>
    </div>

         <!-- FEATURES SECTION -->
     <div class="features-section">
               <div class="feature-card main-feature" onclick="navigateToCP2388()">
          <div class="feature-icon">
            <i class="fas fa-cogs"></i>
          </div>
          <div class="feature-content">
                         <h3>CP2388 - PLC Fundamentals</h3>
             <p>12 structured worksheets covering PLC systems, HMIs, emergency stops, sensors, relays, and industrial components.</p>
            <span class="feature-badge">Primary Curriculum</span>
                         <button class="start-here-btn" onclick="event.stopPropagation(); navigateToCP2388()">
              <i class="fas fa-play"></i> Start Here
            </button>
          </div>
        </div>

       <div class="features-grid">
                   <div class="feature-card" onclick="openPDF('docs/CP2388 â€“ PLC Fundamentals for Maintenance Engineers.pdf')">
            <div class="feature-icon">
              <i class="fas fa-cogs"></i>
            </div>
            <div class="feature-content">
              <h3>Curriculum Guide</h3>
              <p>Complete CP2388 curriculum documentation and learning objectives.</p>
              <span class="feature-badge">CP2388</span>
            </div>
          </div>

                   <div class="feature-card" onclick="openPDF('docs/IM6930 - PLC Fundamentals Trainer User Manual.pdf')">
            <div class="feature-icon">
              <i class="fas fa-book"></i>
            </div>
            <div class="feature-content">
              <h3>User Manual</h3>
              <p>Comprehensive user manual for the IM6930 PLC Fundamentals Trainer.</p>
              <span class="feature-badge">IM6930</span>
            </div>
          </div>

                   <div class="feature-card" onclick="openPDF('docs/IM6930 Electrical Drawings Rev7.pdf')">
            <div class="feature-icon">
              <i class="fas fa-bolt"></i>
            </div>
            <div class="feature-content">
              <h3>Electrical Drawings</h3>
              <p>Detailed electrical schematics and wiring diagrams for the training system.</p>
              <span class="feature-badge">Rev7</span>
            </div>
          </div>
       </div>
     </div>
  </div>

  <!-- Load dependencies -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="scenario-popup.js"></script>
  <script src="pwa-install.js"></script>
  
     <!-- PDF Opening Function - Must be defined before use -->
   <script>
     // PWA PDF opening function
     function openPDF(pdfPath) {
       // Try to open PDF directly in browser, with fallback to download
       const link = document.createElement('a');
       link.href = pdfPath;
       link.target = '_blank';
       link.download = pdfPath.split('/').pop() || 'document.pdf';
       
       // Try to open in new tab first
       const newWindow = window.open(pdfPath, '_blank');
       
       // If that fails, trigger download
       if (!newWindow || newWindow.closed || typeof newWindow.closed == 'undefined') {
         link.click();
       }
     }
     
           // CP2388 Navigation Function with error handling
      function navigateToCP2388() {
        console.log('navigateToCP2388 function called!');
        try {
          console.log('Attempting to navigate to CP2388 worksheets...');
          window.location.href = 'CP2388-worksheets.html';
        } catch (error) {
          console.error('Navigation error:', error);
          // Fallback: try alternative methods
          try {
            window.location = 'CP2388-worksheets.html';
          } catch (fallbackError) {
            console.error('Fallback navigation also failed:', fallbackError);
            // Last resort: create a link and click it
            const link = document.createElement('a');
            link.href = 'CP2388-worksheets.html';
            link.click();
          }
        }
      }
   </script>
  
  <!-- Splash Screen Logic -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const splashScreen = document.getElementById('splash-screen');
      const loadingProgress = document.querySelector('.loading-progress');
      
      // Check if this is the first boot in this session
      const isFirstBoot = !sessionStorage.getItem('hasBooted');
      
      if (!isFirstBoot) {
        // If it's not first boot, hide splash screen immediately
        splashScreen.style.display = 'none';
      } else {
        // Initialize splash screen only on first boot
        // Animate the loading progress
        let progress = 0;
        const progressInterval = setInterval(() => {
          progress += 2;
          loadingProgress.style.width = progress + '%';
          
          if (progress >= 100) {
            clearInterval(progressInterval);
            
            // Fade out splash screen
            setTimeout(() => {
              splashScreen.style.opacity = '0';
              setTimeout(() => {
                splashScreen.style.display = 'none';
              }, 500);
            }, 500);
          }
        }, 50); // Update every 50ms for smooth animation
        
        // Fallback: Force hide splash screen after 10 seconds if something goes wrong
        setTimeout(() => {
          if (splashScreen.style.display !== 'none') {
            splashScreen.style.opacity = '0';
            setTimeout(() => {
              splashScreen.style.display = 'none';
            }, 500);
          }
        }, 10000);
        
        // Mark that we've booted
        sessionStorage.setItem('hasBooted', 'true');
      }
    });
    
    // Additional fallback: Hide splash screen on any click or keypress
    document.addEventListener('click', () => {
      const splashScreen = document.getElementById('splash-screen');
      if (splashScreen && splashScreen.style.display !== 'none') {
        splashScreen.style.opacity = '0';
        setTimeout(() => {
          splashScreen.style.display = 'none';
        }, 500);
      }
    });
    
    document.addEventListener('keydown', () => {
      const splashScreen = document.getElementById('splash-screen');
      if (splashScreen && splashScreen.style.display !== 'none') {
        splashScreen.style.opacity = '0';
        setTimeout(() => {
          splashScreen.style.display = 'none';
        }, 500);
      }
    });
    
    // Ensure background animation is running
    function ensureBackgroundAnimation() {
      const body = document.body;
      
      // Force a reflow to restart animation if needed
      body.offsetHeight;
      
      // Log animation status for debugging
      console.log('Matrix background animation ensured');
    }
    
    // Initialize background animation immediately
    document.addEventListener('DOMContentLoaded', () => {
      ensureBackgroundAnimation();
      
      // Initialize background animation
      ensureBackgroundAnimation();
    });
    
    // Check animation status periodically
    setInterval(ensureBackgroundAnimation, 10000);
    
    // Also check when page becomes visible
    document.addEventListener('visibilitychange', () => {
      if (!document.hidden) {
        ensureBackgroundAnimation();
      }
    });
    
    // Restart animation on window focus
    window.addEventListener('focus', ensureBackgroundAnimation);
    

  </script>
  <script>
    // Ensure window.electron is not referenced
    if (typeof window.electron === 'undefined') {
      window.electron = null;
    }
    
    // Add offline indicator
    window.addEventListener('online', function() {
      document.body.classList.remove('offline');
    });
    
    window.addEventListener('offline', function() {
      document.body.classList.add('offline');
    });



         // Register service worker for PWA functionality
     if ('serviceWorker' in navigator) {
       window.addEventListener('load', function() {
         // Check if we're on GitHub Pages
         const isGitHubPages = window.location.hostname.includes('github.io');
         
         if (isGitHubPages) {
           // For GitHub Pages, use relative scope
           navigator.serviceWorker.register('service-worker.js', {
             scope: './'
           }).then(function(registration) {
             console.log('Service Worker registered successfully:', registration);
           }).catch(function(error) {
             console.error('Service Worker registration failed:', error);
           });
         } else {
           // For local development, try both scopes
           navigator.serviceWorker.register('service-worker.js', {
             scope: '/'
           }).then(function(registration) {
             console.log('Service Worker registered successfully:', registration);
           }).catch(function(error) {
             console.error('Service Worker registration failed:', error);
             // Fallback to relative scope
             navigator.serviceWorker.register('service-worker.js', {
               scope: './'
             }).then(function(registration) {
               console.log('Service Worker registered successfully with fallback scope:', registration);
             }).catch(function(fallbackError) {
               console.error('Service Worker registration failed with fallback scope:', fallbackError);
             });
           });
         }
       });
     }
  </script>
</body>
</html>
